### setTimeout、setInterval 和 requestAnimationFrame 的区别

    都是浏览器提供的接口，而不是 JS 语言的 API，后者是浏览器专门为动画渲染提供的 API。前两个方法都要求传入时间间隔的参数，而且参数这两个方法都会加入EventLoop 中，设置的时间并不一定等于实际的时间间隔。requestAnimationFrame 则完全是根据浏览器的刷新频率决定，最大调用频率不会超过 60HZ，也就是 16.67 ms 重新渲染一次。

requestAnimationFrame 的优点：

1. 当页面不可见时，其回调函数不会被调用，可以有效减少 CPU 和 GPU 的使用率。

2. 其最大调用频率不会超过 60HZ，无论屏幕刷新率是多少，因而回调函数也不会每秒调用超过 60 次。

3. 只有当页面真正开始渲染时，回调函数才被使用。

4. 回调函数无需合并，程序员可以在任意位置设置回调函数，它们可以被浏览器集中处理，而无需要一个统一的入口。

5. requestAnimationFrame 会把每一帧中的所有 DOM 操作集中起来，在一次重绘或回流中就完成，并且重绘或回流的时间间隔紧紧跟随浏览器的刷新频率。

        而setTimeout和setInterval的问题是，它们都不精确。它们的内在[运行机制](http://www.cnblogs.com/xiaohuochai/p/5773183.html#anchor3)决定了时间间隔参数实际上只是指定了把动画代码添加到浏览器UI线程队列中以等待执行的时间。如果队列前面已经加入了其他任务，那动画代码就要等前面的任务完成后再执行

　　requestAnimationFrame采用系统时间间隔，保持最佳绘制效率，不会因为间隔时间过短，造成过度绘制，增加开销；也不会因为间隔时间太长，使用动画卡顿不流畅，让各种网页动画效果能够有一个统一的刷新机制，从而节省系统资源，提高系统性能，改善视觉效果
